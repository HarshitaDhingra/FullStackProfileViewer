{"ast":null,"code":"import _classCallCheck from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/utils/authcheck.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport history from './history';\nimport * as ACTIONS from '../store/actions/actions';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nvar AuthCheck = /*#__PURE__*/function (_Component) {\n  _inherits(AuthCheck, _Component);\n\n  var _super = _createSuper(AuthCheck);\n\n  function AuthCheck() {\n    var _this;\n\n    _classCallCheck(this, AuthCheck);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.send_profile_to_db = function (profile) {\n      var data = profile;\n      axios.post('/api/posts/userprofiletodb', data).then(axios.get('/api/get/userprofilefromdb', {\n        params: {\n          email: profile.profile.email\n        }\n      }).then(function (res) {\n        return _this.props.set_db_profile(res.data);\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(AuthCheck, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.auth.isAuthenticated()) {\n        this.props.login_success();\n        this.props.add_profile(this.props.auth.userProfile);\n        this.send_profile_to_db(this.props.auth.userProfile);\n        setTimeout(function () {\n          return history.replace('/');\n        }, 50);\n      } else {\n        this.props.login_failure();\n        this.props.remove_profile();\n        this.props.remove_db_profile();\n        history.replace('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }\n      });\n    }\n  }]);\n\n  return AuthCheck;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    login_success: function login_success() {\n      return dispatch(ACTIONS.login_success());\n    },\n    login_failure: function login_failure() {\n      return dispatch(ACTIONS.login_failure());\n    },\n    add_profile: function add_profile(profile) {\n      return dispatch(ACTIONS.add_profile(profile));\n    },\n    remove_profile: function remove_profile() {\n      return dispatch(ACTIONS.remove_profile());\n    },\n    set_db_profile: function set_db_profile(profile) {\n      return dispatch(ACTIONS.set_db_profile(profile));\n    },\n    remove_db_profile: function remove_db_profile() {\n      return dispatch(ACTIONS.remove_db_profile());\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthCheck);","map":{"version":3,"sources":["/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/utils/authcheck.js"],"names":["React","Component","history","ACTIONS","connect","axios","AuthCheck","send_profile_to_db","profile","data","post","then","get","params","email","res","props","set_db_profile","auth","isAuthenticated","login_success","add_profile","userProfile","setTimeout","replace","login_failure","remove_profile","remove_db_profile","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAO,KAAKC,OAAZ,MAAyB,0BAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAKMC,S;;;;;;;;;;;;;;;;UAEJC,kB,GAAqB,UAACC,OAAD,EAAa;AAChC,UAAMC,IAAI,GAAGD,OAAb;AACAH,MAAAA,KAAK,CAACK,IAAN,CAAW,4BAAX,EAAyCD,IAAzC,EACGE,IADH,CACQN,KAAK,CAACO,GAAN,CAAU,4BAAV,EAAwC;AAACC,QAAAA,MAAM,EAAE;AAACC,UAAAA,KAAK,EAAEN,OAAO,CAACA,OAAR,CAAgBM;AAAxB;AAAT,OAAxC,EACHH,IADG,CACE,UAAAI,GAAG;AAAA,eAAI,MAAKC,KAAL,CAAWC,cAAX,CAA0BF,GAAG,CAACN,IAA9B,CAAJ;AAAA,OADL,CADR;AAGD,K;;;;;;;wCAGmB;AAClB,UAAG,KAAKO,KAAL,CAAWE,IAAX,CAAgBC,eAAhB,EAAH,EAAsC;AACpC,aAAKH,KAAL,CAAWI,aAAX;AACA,aAAKJ,KAAL,CAAWK,WAAX,CAAuB,KAAKL,KAAL,CAAWE,IAAX,CAAgBI,WAAvC;AACA,aAAKf,kBAAL,CAAwB,KAAKS,KAAL,CAAWE,IAAX,CAAgBI,WAAxC;AACAC,QAAAA,UAAU,CAAC;AAAA,iBAAMrB,OAAO,CAACsB,OAAR,CAAgB,GAAhB,CAAN;AAAA,SAAD,EAA6B,EAA7B,CAAV;AACD,OALD,MAMK;AACH,aAAKR,KAAL,CAAWS,aAAX;AACA,aAAKT,KAAL,CAAWU,cAAX;AACA,aAAKV,KAAL,CAAWW,iBAAX;AACAzB,QAAAA,OAAO,CAACsB,OAAR,CAAgB,GAAhB;AACD;AACF;;;6BAEQ;AACP,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGE;;;;EA7BkBvB,S;;AAgCxB,SAAS2B,eAAT,CAA0BC,KAA1B,EAAiC;AAC/B,SAAO,EAAP;AAGD;;AAED,SAASC,kBAAT,CAA6BC,QAA7B,EAAuC;AACrC,SAAO;AACLX,IAAAA,aAAa,EAAE;AAAA,aAAMW,QAAQ,CAAC5B,OAAO,CAACiB,aAAR,EAAD,CAAd;AAAA,KADV;AAELK,IAAAA,aAAa,EAAE;AAAA,aAAMM,QAAQ,CAAC5B,OAAO,CAACsB,aAAR,EAAD,CAAd;AAAA,KAFV;AAGLJ,IAAAA,WAAW,EAAE,qBAACb,OAAD;AAAA,aAAauB,QAAQ,CAAC5B,OAAO,CAACkB,WAAR,CAAoBb,OAApB,CAAD,CAArB;AAAA,KAHR;AAILkB,IAAAA,cAAc,EAAE;AAAA,aAAMK,QAAQ,CAAC5B,OAAO,CAACuB,cAAR,EAAD,CAAd;AAAA,KAJX;AAKLT,IAAAA,cAAc,EAAE,wBAACT,OAAD;AAAA,aAAauB,QAAQ,CAAC5B,OAAO,CAACc,cAAR,CAAuBT,OAAvB,CAAD,CAArB;AAAA,KALX;AAMLmB,IAAAA,iBAAiB,EAAE;AAAA,aAAMI,QAAQ,CAAC5B,OAAO,CAACwB,iBAAR,EAAD,CAAd;AAAA;AANd,GAAP;AAQD;;AAED,eAAevB,OAAO,CAACwB,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CxB,SAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport history from './history';\r\nimport * as ACTIONS from '../store/actions/actions';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\n\r\n\r\n\r\n\r\nclass AuthCheck extends Component {\r\n\r\n  send_profile_to_db = (profile) => {\r\n    const data = profile\r\n    axios.post('/api/posts/userprofiletodb', data )\r\n      .then(axios.get('/api/get/userprofilefromdb', {params: {email: profile.profile.email}})\r\n        .then(res => this.props.set_db_profile(res.data)) )\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if(this.props.auth.isAuthenticated()) {\r\n      this.props.login_success()\r\n      this.props.add_profile(this.props.auth.userProfile)\r\n      this.send_profile_to_db(this.props.auth.userProfile)\r\n      setTimeout(() => history.replace('/'), 50)\r\n    }\r\n    else {\r\n      this.props.login_failure()\r\n      this.props.remove_profile()\r\n      this.props.remove_db_profile()\r\n      history.replace('/')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n        <div>\r\n        </div>\r\n    )}\r\n}\r\n\r\nfunction mapStateToProps (state) {\r\n  return {\r\n\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n  return {\r\n    login_success: () => dispatch(ACTIONS.login_success()),\r\n    login_failure: () => dispatch(ACTIONS.login_failure()),\r\n    add_profile: (profile) => dispatch(ACTIONS.add_profile(profile)),\r\n    remove_profile: () => dispatch(ACTIONS.remove_profile()),\r\n    set_db_profile: (profile) => dispatch(ACTIONS.set_db_profile(profile)),\r\n    remove_db_profile: () => dispatch(ACTIONS.remove_db_profile())\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthCheck);\r\n"]},"metadata":{},"sourceType":"module"}