{"ast":null,"code":"import _toConsumableArray from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/Blog/posts.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport * as ACTIONS from '../store/actions/actions';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Pagination from \"react-js-pagination\";\nimport '../App.css';\n\nvar Posts = /*#__PURE__*/function (_Component) {\n  _inherits(Posts, _Component);\n\n  var _super = _createSuper(Posts);\n\n  function Posts(props) {\n    var _this;\n\n    _classCallCheck(this, Posts);\n\n    _this = _super.call(this, props);\n\n    _this.animate_search_posts = function () {\n      _this.setState({\n        posts_search_motion: []\n      });\n\n      var i = 1;\n\n      _this.state.posts_search.map(function (post) {\n        // eslint-disable-line\n        setTimeout(function () {\n          _this.setState({\n            posts_search_motion: [].concat(_toConsumableArray(_this.state.posts_search_motion), [post])\n          });\n        }, 50 * i);\n        i++;\n      });\n    };\n\n    _this.add_search_posts_to_state = function (posts) {\n      _this.setState({\n        posts_search: []\n      });\n\n      _this.setState({\n        posts_search: _toConsumableArray(posts)\n      });\n\n      _this.animate_search_posts();\n    };\n\n    _this.handleSearch = function (event) {\n      var search_query = event.target.value;\n      axios.get('/api/get/searchpost', {\n        params: {\n          search_query: search_query\n        }\n      }).then(function (res) {\n        return _this.props.search_posts_success(res.data);\n      }).then(function () {\n        return _this.add_search_posts_to_state(_this.props.db_search_posts);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.handleTransition = function () {\n      setTimeout(function () {\n        return _this.setState({\n          opacity: 1\n        });\n      }, 400);\n    };\n\n    _this.add_posts_to_state = function (posts) {\n      _this.setState({\n        posts: _toConsumableArray(posts)\n      });\n\n      _this.setState({\n        num_posts: _this.state.posts.length\n      });\n\n      _this.setState({\n        page_range: _this.state.num_posts / 5\n      });\n\n      _this.slice_posts();\n\n      _this.animate_posts();\n    };\n\n    _this.slice_posts = function () {\n      var indexOfLastPost = _this.state.activePage * _this.state.posts_per_page;\n      var indexOfFirstPost = indexOfLastPost - _this.state.posts_per_page;\n\n      _this.setState({\n        posts_slice: _this.state.posts.slice(indexOfFirstPost, indexOfLastPost)\n      });\n    };\n\n    _this.animate_posts = function () {\n      _this.setState({\n        posts_motion: []\n      });\n\n      var i = 1;\n\n      _this.state.posts_slice.map(function (post) {\n        // eslint-disable-line\n        setTimeout(function () {\n          _this.setState({\n            posts_motion: [].concat(_toConsumableArray(_this.state.posts_motion), [post])\n          });\n        }, 400 * i);\n        i++;\n      });\n    };\n\n    _this.handlePageChange = function (pageNumber) {\n      _this.setState({\n        activePage: pageNumber\n      });\n\n      setTimeout(function () {\n        _this.slice_posts();\n      }, 50);\n      setTimeout(function () {\n        _this.animate_posts();\n      }, 100);\n    };\n\n    _this.RenderPosts = function (post) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"CardStyles\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        title: /*#__PURE__*/React.createElement(Link, {\n          to: {\n            pathname: '/post/' + post.post.pid,\n            state: {\n              post: post\n            }\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 16\n          }\n        }, post.post.title),\n        subheader: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"FlexColumn\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"FlexRow\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }\n        }, moment(post.post.date_created).format('MMMM Do, YYYY | h:mm a')), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"FlexRow\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }\n        }, \"By:\", /*#__PURE__*/React.createElement(Link, {\n          style: {\n            paddingLeft: '5px',\n            textDecoration: 'none'\n          },\n          to: {\n            pathname: \"/user/\" + post.post.author,\n            state: {\n              post: post\n            }\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }\n        }, post.post.author)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"FlexRow\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }\n        }, \"thumb_up\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification-num-allposts\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }\n        }, \" \", post.post.likes, \" \"))),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(CardContent, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          overflow: 'hidden'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }, \" \", post.post.body, \" \"))));\n    };\n\n    _this.state = {\n      posts: [],\n      opacity: 0,\n      posts_motion: [],\n      num_posts: 0,\n      page_range: 0,\n      activePage: 1,\n      posts_per_page: 5,\n      posts_slice: [],\n      posts_search: [],\n      posts_search_motion: []\n    };\n    return _this;\n  }\n\n  _createClass(Posts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.handleTransition();\n      axios.get('/api/get/allposts').then(function (res) {\n        return _this2.props.set_posts(res.data);\n      }).then(function () {\n        return _this2.add_posts_to_state(_this2.props.posts);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          opacity: this.state.opacity,\n          transition: 'opacity 2s ease'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }), this.props.is_authenticated ? /*#__PURE__*/React.createElement(Link, {\n        to: \"/addpost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }, \"Add Post\")) : /*#__PURE__*/React.createElement(Link, {\n        to: \"/signup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }\n      }, \"Sign Up to Add Post\"))), /*#__PURE__*/React.createElement(TextField, {\n        id: \"search\",\n        label: \"Search\",\n        margin: \"normal\",\n        onChange: this.handleSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 9\n        }\n      }, this.state.posts_search ? this.state.posts_search_motion.map(function (post) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(_this3.RenderPosts, {\n          key: post.pid,\n          post: post,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 19\n          }\n        }));\n      }) : null), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          opacity: this.state.opacity,\n          transition: 'opacity 2s ease'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 9\n        }\n      }, \"Posts\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }\n      }, this.state.posts ? this.state.posts_motion.map(function (post) {\n        return /*#__PURE__*/React.createElement(_this3.RenderPosts, {\n          key: post.pid,\n          post: post,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 21\n          }\n        });\n      }) : null)), /*#__PURE__*/React.createElement(Pagination, {\n        activePage: this.state.activePage,\n        itemsCountPerPage: 5,\n        totalItemsCount: this.state.num_posts,\n        pageRangeDisplayed: this.state.page_range,\n        onChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 10\n        }\n      }));\n    }\n  }]);\n\n  return Posts;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    posts: state.posts_reducer.posts,\n    is_authenticated: state.auth_reducer.is_authenticated,\n    db_search_posts: state.posts_reducer.db_search_posts\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    set_posts: function set_posts(posts) {\n      return dispatch(ACTIONS.fetch_db_posts(posts));\n    },\n    search_posts_success: function search_posts_success(posts) {\n      return dispatch(ACTIONS.fetch_search_posts(posts));\n    },\n    remove_search_posts: function remove_search_posts() {\n      return dispatch(ACTIONS.remove_search_posts());\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Posts);","map":{"version":3,"sources":["/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/Blog/posts.js"],"names":["React","Component","connect","Link","ACTIONS","axios","moment","Button","TextField","Card","CardContent","CardHeader","Pagination","Posts","props","animate_search_posts","setState","posts_search_motion","i","state","posts_search","map","post","setTimeout","add_search_posts_to_state","posts","handleSearch","event","search_query","target","value","get","params","then","res","search_posts_success","data","db_search_posts","catch","error","console","log","handleTransition","opacity","add_posts_to_state","num_posts","length","page_range","slice_posts","animate_posts","indexOfLastPost","activePage","posts_per_page","indexOfFirstPost","posts_slice","slice","posts_motion","handlePageChange","pageNumber","RenderPosts","pathname","pid","title","date_created","format","paddingLeft","textDecoration","author","likes","overflow","body","set_posts","err","transition","is_authenticated","mapStateToProps","posts_reducer","auth_reducer","mapDispatchToProps","dispatch","fetch_db_posts","fetch_search_posts","remove_search_posts"],"mappings":"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","sourcesContent":[" import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport * as ACTIONS from '../store/actions/actions';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\n\r\nimport Pagination from \"react-js-pagination\";\r\n\r\nimport '../App.css'\r\n\r\n\r\n\r\n\r\n\r\nclass Posts extends Component {\r\n  constructor(props) {\r\n      super(props)\r\n\r\n    this.state = {\r\n      posts: [],\r\n      opacity: 0,\r\n      posts_motion: [],\r\n      num_posts: 0,\r\n      page_range: 0,\r\n      activePage: 1,\r\n      posts_per_page: 5,\r\n      posts_slice: [],\r\n      posts_search: [],\r\n      posts_search_motion: [],\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.handleTransition()\r\n    axios.get('/api/get/allposts')\r\n      .then(res => this.props.set_posts(res.data))\r\n      .then(() => this.add_posts_to_state(this.props.posts))\r\n      .catch((err) => console.log(err))\r\n  }\r\n\r\n  animate_search_posts = () => {\r\n    this.setState({posts_search_motion: [] })\r\n    let i = 1\r\n    this.state.posts_search.map(post => { // eslint-disable-line\r\n      setTimeout(() => { this.setState({posts_search_motion: [...this.state.posts_search_motion, post]}) }, 50 * i );\r\n      i++;\r\n    })\r\n  }\r\n\r\n  add_search_posts_to_state = (posts) => {\r\n    this.setState({posts_search: []});\r\n    this.setState({posts_search: [...posts]});\r\n\r\n    this.animate_search_posts();\r\n  }\r\n\r\n  handleSearch = (event) => {\r\n    const search_query = event.target.value\r\n    axios.get('/api/get/searchpost', {params: {search_query: search_query} })\r\n    .then(res => this.props.search_posts_success(res.data))\r\n    .then(() => this.add_search_posts_to_state(this.props.db_search_posts))\r\n    .catch(function (error) {\r\n      console.log(error);\r\n      })\r\n  }\r\n\r\n  handleTransition = () => {\r\n    setTimeout(() => this.setState({opacity: 1}), 400 )\r\n  }\r\n\r\n  add_posts_to_state = (posts) => {\r\n    this.setState({posts: [...posts]})\r\n    this.setState({num_posts: this.state.posts.length})\r\n    this.setState({page_range: this.state.num_posts/5})\r\n\r\n    this.slice_posts();\r\n    this.animate_posts();\r\n  }\r\n\r\n  slice_posts = () => {\r\n     const indexOfLastPost = this.state.activePage * this.state.posts_per_page\r\n     const indexOfFirstPost = indexOfLastPost - this.state.posts_per_page\r\n\r\n\r\n     this.setState({posts_slice: this.state.posts.slice(indexOfFirstPost, indexOfLastPost) })\r\n   }\r\n\r\n   animate_posts = () => {\r\n      this.setState({posts_motion: [] })\r\n      let i = 1\r\n      this.state.posts_slice.map(post => {  // eslint-disable-line\r\n        setTimeout(() => { this.setState({posts_motion: [...this.state.posts_motion, post]}) }, 400 * i );\r\n        i++;\r\n      })\r\n    }\r\n\r\n  handlePageChange = (pageNumber) => {\r\n    this.setState({activePage: pageNumber});\r\n\r\n    setTimeout(() => { this.slice_posts() }, 50 )\r\n    setTimeout(() => { this.animate_posts() }, 100 )\r\n   }\r\n\r\n  RenderPosts = post => (\r\n    <div className=\"CardStyles\">\r\n    <Card >\r\n      <CardHeader\r\n        title={<Link to={{pathname:'/post/' + post.post.pid, state: {post}}}>\r\n                  {post.post.title}\r\n                </Link> }\r\n        subheader={\r\n            <div className=\"FlexColumn\">\r\n              <div className=\"FlexRow\">\r\n              {  moment(post.post.date_created).format('MMMM Do, YYYY | h:mm a') }\r\n              </div>\r\n              <div className=\"FlexRow\">\r\n                By:\r\n                <Link style={{paddingLeft: '5px', textDecoration: 'none'}} \r\n                      to={{pathname:\"/user/\" + post.post.author, state:{post} }}>\r\n                 { post.post.author }\r\n                 </Link>\r\n               </div>\r\n               <div className=\"FlexRow\">\r\n                <i className=\"material-icons\">thumb_up</i>\r\n                <div className=\"notification-num-allposts\"> {post.post.likes} </div>\r\n              </div>\r\n            </div>\r\n            }\r\n          />\r\n      <br />\r\n      <CardContent>\r\n        <span style={{overflow: 'hidden' }}> {post.post.body} </span>\r\n      </CardContent>\r\n    </Card>\r\n    </div>\r\n  )\r\n\r\n  render(){\r\n    return(\r\n        <div>\r\n        <div style={{opacity: this.state.opacity, transition: 'opacity 2s ease'}}>\r\n        <br />\r\n        { this.props.is_authenticated\r\n          ?  <Link to=\"/addpost\">\r\n                <Button variant=\"contained\" color=\"primary\">\r\n                  Add Post\r\n                </Button>\r\n              </Link>\r\n          : <Link to=\"/signup\">\r\n                <Button variant=\"contained\" color=\"primary\">\r\n                  Sign Up to Add Post\r\n                </Button>\r\n              </Link>\r\n            }\r\n        </div>\r\n        <TextField\r\n          id=\"search\"\r\n          label=\"Search\"\r\n          margin=\"normal\"\r\n          onChange={this.handleSearch}\r\n        />\r\n        <hr />\r\n        <hr />\r\n        <div>\r\n              {this.state.posts_search\r\n                ? this.state.posts_search_motion.map(post =>\r\n                <div>\r\n                  <this.RenderPosts key={post.pid} post={post} />\r\n\r\n                </div>\r\n                 )\r\n                 : null\r\n               }\r\n         </div>\r\n\r\n        <div style={{opacity: this.state.opacity, transition: 'opacity 2s ease'}}>\r\n        <h1>Posts</h1>\r\n          <div>\r\n                {this.state.posts\r\n                  ? this.state.posts_motion.map(post =>\r\n                    <this.RenderPosts key={post.pid} post={post} />\r\n                   )\r\n                   : null\r\n                 }\r\n           </div>\r\n         </div>\r\n         <Pagination\r\n             activePage={this.state.activePage}\r\n             itemsCountPerPage={5}\r\n             totalItemsCount={this.state.num_posts}\r\n             pageRangeDisplayed={this.state.page_range}\r\n             onChange={this.handlePageChange}\r\n            />\r\n        </div>\r\n    )}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    posts: state.posts_reducer.posts,\r\n    is_authenticated: state.auth_reducer.is_authenticated,\r\n    db_search_posts: state.posts_reducer.db_search_posts\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    set_posts: (posts) => dispatch(ACTIONS.fetch_db_posts(posts)),\r\n    search_posts_success: (posts) => dispatch(ACTIONS.fetch_search_posts(posts)),\r\n    remove_search_posts: () => dispatch(ACTIONS.remove_search_posts())\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Posts)\r\n"]},"metadata":{},"sourceType":"module"}