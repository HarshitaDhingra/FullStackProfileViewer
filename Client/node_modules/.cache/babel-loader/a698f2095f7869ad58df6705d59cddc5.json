{"ast":null,"code":"import _toConsumableArray from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/Blog/showpost.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as ACTIONS from '../store/actions/actions';\nimport axios from 'axios';\nimport history from '../utils/history';\nimport { Link } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nvar ShowPost = /*#__PURE__*/function (_Component) {\n  _inherits(ShowPost, _Component);\n\n  var _super = _createSuper(ShowPost);\n\n  function ShowPost(props) {\n    var _this;\n\n    _classCallCheck(this, ShowPost);\n\n    _this = _super.call(this, props);\n\n    _this.setCurUserID = function () {\n      if (_this.props.isAuthenticated) {\n        _this.setState({\n          cur_user_id: _this.props.db_profile[0].uid\n        });\n      }\n    };\n\n    _this.handleTransition = function () {\n      return setTimeout(function () {\n        return _this.setState({\n          opacity: 1\n        });\n      }, 400);\n    };\n\n    _this.add_comments_to_state = function (comments) {\n      _this.setState({\n        comments_arr: _toConsumableArray(comments)\n      });\n\n      _this.animate_comments();\n    };\n\n    _this.animate_comments = function () {\n      var i = 1;\n\n      _this.state.comments_arr.map(function (comment) {\n        // eslint-disable-line\n        setTimeout(function () {\n          _this.setState({\n            comments_motion: [].concat(_toConsumableArray(_this.state.comments_motion), [comment])\n          });\n        }, 400 * i);\n        i++;\n      });\n    };\n\n    _this.handleCommentSubmit = function (submitted_comment) {\n      setTimeout(function () {\n        return _this.setState({\n          comments_motion: [submitted_comment].concat(_toConsumableArray(_this.state.comments_motion))\n        });\n      }, 50);\n    };\n\n    _this.handleCommentUpdate = function (comment) {\n      var commentIndex = _this.state.comments_motion.findIndex(function (com) {\n        return com.cid === comment.cid;\n      });\n\n      var newArr = _toConsumableArray(_this.state.comments_motion);\n\n      newArr[commentIndex] = comment;\n\n      _this.setState({\n        comments_motion: newArr\n      });\n    };\n\n    _this.handleCommentDelete = function (cid) {\n      _this.setState({\n        delete_comment_id: cid\n      });\n\n      var newArr = _this.state.comments_motion.filter(function (com) {\n        return com.cid !== cid;\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          comments_motion: newArr\n        });\n      }, 900);\n    };\n\n    _this.RenderComments = function (comment) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: _this.state.delete_comment_id === comment.comment.cid ? \"FadeOutComment\" : \"CommentStyles\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }\n      }, \" \", comment.comment.comment, \" \"), /*#__PURE__*/React.createElement(\"small\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }\n      }, comment.comment.date_created === 'Just Now' ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 14\n        }\n      }, \" \", comment.comment.isEdited ? /*#__PURE__*/React.createElement(\"span\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      }, \" Edited \") : /*#__PURE__*/React.createElement(\"span\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 19\n        }\n      }, \" Just Now \")) : comment.comment.date_created), /*#__PURE__*/React.createElement(\"p\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, \" By: \", comment.comment.author, \" \"), comment.cur_user_id === comment.comment.user_id ? /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return _this.handleClickOpen(comment.comment.cid, comment.comment.comment);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }, \"Edit\") : null);\n    };\n\n    _this.handleClickOpen = function (cid, comment) {\n      return _this.setState({\n        open: true,\n        comment: comment,\n        cid: cid\n      });\n    };\n\n    _this.handleClose = function () {\n      return _this.setState({\n        open: false,\n        comment: '',\n        cid: ''\n      });\n    };\n\n    _this.handleCommentChange = function (event) {\n      return _this.setState({\n        comment: event.target.value\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        comment: ''\n      });\n\n      var comment = event.target.comment.value;\n      var user_id = _this.props.db_profile[0].uid;\n      var post_id = _this.props.location.state.post.post.pid;\n      var username = _this.props.db_profile[0].username;\n      var current_time = \"Just Now\";\n      var temp_cid = 63426;\n      var submitted_comment = {\n        cid: temp_cid,\n        comment: comment,\n        user_id: user_id,\n        author: username,\n        date_created: current_time\n      };\n      var data = {\n        comment: comment,\n        post_id: post_id,\n        user_id: user_id,\n        username: username\n      };\n      axios.post('/api/post/commenttodb', data).then(function (res) {\n        return console.log(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n\n      _this.handleCommentSubmit(submitted_comment);\n    };\n\n    _this.handleUpdate = function () {\n      var comment = _this.state.comment;\n      var cid = _this.state.cid;\n      var user_id = _this.props.db_profile[0].uid;\n      var post_id = _this.props.location.state.post.post.pid;\n      var username = _this.props.db_profile[0].username;\n      var isEdited = true;\n      var current_time = \"Just Now\";\n      var edited_comment = {\n        cid: cid,\n        comment: comment,\n        user_id: user_id,\n        author: username,\n        date_created: current_time,\n        isEdited: isEdited\n      };\n      var data = {\n        cid: cid,\n        comment: comment,\n        post_id: post_id,\n        user_id: user_id,\n        username: username\n      };\n      axios.put('/api/put/commenttodb', data).then(function (res) {\n        return console.log(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n\n      _this.handleCommentUpdate(edited_comment);\n    };\n\n    _this.handleDelete = function () {\n      var cid = _this.state.cid;\n      axios.delete('/api/delete/comment', {\n        data: {\n          cid: cid\n        }\n      }).then(function (res) {\n        return console.log(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n\n      _this.handleCommentDelete(cid);\n    };\n\n    _this.handleLikes = function () {\n      var user_id = _this.props.db_profile[0].uid;\n      var post_id = _this.props.location.state.post.post.pid;\n      var data = {\n        uid: user_id,\n        post_id: post_id\n      };\n      axios.put('/api/put/likes', data).then(!_this.state.like_user_ids.includes(user_id) && _this.state.like_post ? _this.setState({\n        likes: _this.state.likes + 1\n      }) : null).then(_this.setState({\n        like_post: false\n      })).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.state = {\n      open: false,\n      comment: '',\n      cid: '',\n      opacity: 0,\n      delete_comment_id: 0,\n      comments_arr: [],\n      comments_motion: [],\n      cur_user_id: null,\n      likes: _this.props.location.state.post.post.likes,\n      like_user_ids: _this.props.location.state.post.post.like_user_id,\n      like_post: true\n    };\n    return _this;\n  }\n\n  _createClass(ShowPost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('/api/get/allpostcomments', {\n        params: {\n          post_id: this.props.location.state.post.post.pid\n        }\n      }).then(function (res) {\n        return _this2.props.set_comments(res.data);\n      }).then(function () {\n        return _this2.add_comments_to_state(_this2.props.comments);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n      this.setCurUserID();\n      this.handleTransition();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }\n      }, \"Post\"), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 15\n        }\n      }, this.props.location.state.post.post.title), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }\n      }, this.props.location.state.post.post.body), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }, this.props.location.state.post.post.author), /*#__PURE__*/React.createElement(\"a\", {\n        style: {\n          cursor: 'pointer'\n        },\n        onClick: this.props.isAuthenticated ? function () {\n          return _this3.handleLikes();\n        } : function () {\n          return history.replace('/signup');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 19\n        }\n      }, \"thumb_up\"), /*#__PURE__*/React.createElement(\"small\", {\n        className: \"notification-num-showpost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 19\n        }\n      }, \" \", this.state.likes, \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, \" Comments:\"), this.props.comments ? this.state.comments_motion.map(function (comment) {\n        return /*#__PURE__*/React.createElement(_this3.RenderComments, {\n          comment: comment,\n          key: comment.cid,\n          cur_user_id: _this3.props.db_profile[0].uid,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 18\n          }\n        });\n      }) : null), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"comment\",\n        label: \"Comment\",\n        margin: \"normal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 15\n        }\n      }), this.props.isAuthenticated ? /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 19\n        }\n      }, \"Submit\") : /*#__PURE__*/React.createElement(Link, {\n        to: \"/signup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 22\n        }\n      }, \"Signup to Comment\")))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Dialog, {\n        open: this.state.open,\n        onClose: this.handleClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }\n      }, \"Edit Comment\"), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.comment,\n        onChange: this.handleCommentChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this3.handleUpdate();\n\n          _this3.handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 23\n        }\n      }, \"Agree\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 23\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this3.handleDelete();\n\n          _this3.handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 23\n        }\n      }, \"Delete\"))))));\n    }\n  }]);\n\n  return ShowPost;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    comments: state.posts_reducer.comments,\n    db_profile: state.auth_reducer.db_profile,\n    isAuthenticated: state.auth_reducer.is_authenticated\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    set_comments: function set_comments(comments) {\n      return dispatch(ACTIONS.fetch_post_comments(comments));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPost);","map":{"version":3,"sources":["/Users/evive 1/Desktop/EviveRepos/react-complete-fullstack/Client/src/Blog/showpost.js"],"names":["React","Component","connect","ACTIONS","axios","history","Link","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","ShowPost","props","setCurUserID","isAuthenticated","setState","cur_user_id","db_profile","uid","handleTransition","setTimeout","opacity","add_comments_to_state","comments","comments_arr","animate_comments","i","state","map","comment","comments_motion","handleCommentSubmit","submitted_comment","handleCommentUpdate","commentIndex","findIndex","com","cid","newArr","handleCommentDelete","delete_comment_id","filter","RenderComments","date_created","isEdited","author","user_id","handleClickOpen","open","handleClose","handleCommentChange","event","target","value","handleSubmit","preventDefault","post_id","location","post","pid","username","current_time","temp_cid","data","then","res","console","log","catch","err","window","scroll","top","left","behavior","handleUpdate","edited_comment","put","handleDelete","delete","handleLikes","like_user_ids","includes","like_post","likes","like_user_id","get","params","set_comments","title","body","cursor","replace","mapStateToProps","posts_reducer","auth_reducer","is_authenticated","mapDispatchToProps","dispatch","fetch_post_comments"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAO,KAAKC,OAAZ,MAAyB,0BAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;IAKMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UA4BnBC,YA5BmB,GA4BJ,YAAM;AACnB,UAAG,MAAKD,KAAL,CAAWE,eAAd,EAA+B;AAC7B,cAAKC,QAAL,CAAc;AAACC,UAAAA,WAAW,EAAE,MAAKJ,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyBC;AAAvC,SAAd;AACD;AACF,KAhCkB;;AAAA,UAkCnBC,gBAlCmB,GAkCA;AAAA,aACjBC,UAAU,CAAC;AAAA,eAAM,MAAKL,QAAL,CAAc;AAACM,UAAAA,OAAO,EAAE;AAAV,SAAd,CAAN;AAAA,OAAD,EAAoC,GAApC,CADO;AAAA,KAlCA;;AAAA,UAsCnBC,qBAtCmB,GAsCK,UAACC,QAAD,EAAc;AACpC,YAAKR,QAAL,CAAc;AAAES,QAAAA,YAAY,qBAAMD,QAAN;AAAd,OAAd;;AACA,YAAKE,gBAAL;AACD,KAzCkB;;AAAA,UA2CnBA,gBA3CmB,GA2CA,YAAM;AACvB,UAAIC,CAAC,GAAG,CAAR;;AACA,YAAKC,KAAL,CAAWH,YAAX,CAAwBI,GAAxB,CAA4B,UAAAC,OAAO,EAAI;AAAG;AACxCT,QAAAA,UAAU,CAAC,YAAM;AAAE,gBAAKL,QAAL,CAAc;AAACe,YAAAA,eAAe,+BAAM,MAAKH,KAAL,CAAWG,eAAjB,IAAkCD,OAAlC;AAAhB,WAAd;AAA4E,SAArF,EAAuF,MAAMH,CAA7F,CAAV;AACAA,QAAAA,CAAC;AACF,OAHD;AAID,KAjDkB;;AAAA,UAmDnBK,mBAnDmB,GAmDG,UAACC,iBAAD,EAAuB;AAC3CZ,MAAAA,UAAU,CAAC;AAAA,eACT,MAAKL,QAAL,CAAc;AAACe,UAAAA,eAAe,GAAGE,iBAAH,4BAAyB,MAAKL,KAAL,CAAWG,eAApC;AAAhB,SAAd,CADS;AAAA,OAAD,EAER,EAFQ,CAAV;AAGC,KAvDgB;;AAAA,UAyDlBG,mBAzDkB,GAyDI,UAACJ,OAAD,EAAa;AACjC,UAAMK,YAAY,GAAG,MAAKP,KAAL,CAAWG,eAAX,CAA2BK,SAA3B,CAAqC,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,GAAJ,KAAYR,OAAO,CAACQ,GAAxB;AAAA,OAAxC,CAArB;;AACA,UAAIC,MAAM,sBAAO,MAAKX,KAAL,CAAWG,eAAlB,CAAV;;AACAQ,MAAAA,MAAM,CAACJ,YAAD,CAAN,GAAuBL,OAAvB;;AACA,YAAKd,QAAL,CAAc;AAACe,QAAAA,eAAe,EAAEQ;AAAlB,OAAd;AACD,KA9DiB;;AAAA,UAgElBC,mBAhEkB,GAgEI,UAACF,GAAD,EAAS;AAC7B,YAAKtB,QAAL,CAAc;AAACyB,QAAAA,iBAAiB,EAAEH;AAApB,OAAd;;AACA,UAAMC,MAAM,GAAG,MAAKX,KAAL,CAAWG,eAAX,CAA2BW,MAA3B,CAAkC,UAAAL,GAAG;AAAA,eAAIA,GAAG,CAACC,GAAJ,KAAYA,GAAhB;AAAA,OAArC,CAAf;;AACAjB,MAAAA,UAAU,CAAC;AAAA,eAAM,MAAKL,QAAL,CAAc;AAACe,UAAAA,eAAe,EAAEQ;AAAlB,SAAd,CAAN;AAAA,OAAD,EAAiD,GAAjD,CAAV;AACD,KApEiB;;AAAA,UAsEnBI,cAtEmB,GAsEF,UAACb,OAAD;AAAA,0BACf;AAAK,QAAA,SAAS,EAAE,MAAKF,KAAL,CAAWa,iBAAX,KAAiCX,OAAO,CAACA,OAAR,CAAgBQ,GAAjD,GACI,gBADJ,GAEI,eAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAMR,OAAO,CAACA,OAAR,CAAgBA,OAAtB,MAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACIA,OAAO,CAACA,OAAR,CAAgBc,YAAhB,KAAiC,UAAjC,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAOd,OAAO,CAACA,OAAR,CAAgBe,QAAhB,gBACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADE,gBAEF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFL,CADH,GAIGf,OAAO,CAACA,OAAR,CAAgBc,YALvB,CAJF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAUd,OAAO,CAACA,OAAR,CAAgBgB,MAA1B,MAZF,EAaGhB,OAAO,CAACb,WAAR,KAAwBa,OAAO,CAACA,OAAR,CAAgBiB,OAAxC,gBACG,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAKC,eAAL,CAAqBlB,OAAO,CAACA,OAAR,CAAgBQ,GAArC,EAA0CR,OAAO,CAACA,OAAR,CAAgBA,OAA1D,CAAN;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADH,GAIG,IAjBN,CADe;AAAA,KAtEE;;AAAA,UA+FnBkB,eA/FmB,GA+FD,UAACV,GAAD,EAAMR,OAAN;AAAA,aAChB,MAAKd,QAAL,CAAc;AAAEiC,QAAAA,IAAI,EAAE,IAAR;AAAcnB,QAAAA,OAAO,EAAEA,OAAvB;AAAgCQ,QAAAA,GAAG,EAAEA;AAArC,OAAd,CADgB;AAAA,KA/FC;;AAAA,UAmGnBY,WAnGmB,GAmGL;AAAA,aACZ,MAAKlC,QAAL,CAAc;AAACiC,QAAAA,IAAI,EAAE,KAAP;AAAcnB,QAAAA,OAAO,EAAE,EAAvB;AAA2BQ,QAAAA,GAAG,EAAE;AAAhC,OAAd,CADY;AAAA,KAnGK;;AAAA,UAuGnBa,mBAvGmB,GAuGG,UAACC,KAAD;AAAA,aACpB,MAAKpC,QAAL,CAAc;AAACc,QAAAA,OAAO,EAAEsB,KAAK,CAACC,MAAN,CAAaC;AAAvB,OAAd,CADoB;AAAA,KAvGH;;AAAA,UA2GnBC,YA3GmB,GA2GJ,UAACH,KAAD,EAAW;AACxBA,MAAAA,KAAK,CAACI,cAAN;;AACA,YAAKxC,QAAL,CAAc;AAACc,QAAAA,OAAO,EAAE;AAAV,OAAd;;AAEA,UAAMA,OAAO,GAAGsB,KAAK,CAACC,MAAN,CAAavB,OAAb,CAAqBwB,KAArC;AACA,UAAMP,OAAO,GAAG,MAAKlC,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyBC,GAAzC;AACA,UAAMsC,OAAO,GAAG,MAAK5C,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCC,GAApD;AACA,UAAMC,QAAQ,GAAG,MAAKhD,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyB2C,QAA1C;AACA,UAAMC,YAAY,GAAG,UAArB;AACA,UAAMC,QAAQ,GAAG,KAAjB;AAEA,UAAM9B,iBAAiB,GAAG;AAACK,QAAAA,GAAG,EAAEyB,QAAN;AACCjC,QAAAA,OAAO,EAAEA,OADV;AAECiB,QAAAA,OAAO,EAAEA,OAFV;AAGCD,QAAAA,MAAM,EAAEe,QAHT;AAICjB,QAAAA,YAAY,EAAEkB;AAJf,OAA1B;AAMA,UAAME,IAAI,GAAG;AAAClC,QAAAA,OAAO,EAAEA,OAAV;AACC2B,QAAAA,OAAO,EAAEA,OADV;AAECV,QAAAA,OAAO,EAAEA,OAFV;AAGCc,QAAAA,QAAQ,EAAEA;AAHX,OAAb;AAKA3D,MAAAA,KAAK,CAACyD,IAAN,CAAW,uBAAX,EAAoCK,IAApC,EACGC,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OADX,EAEGG,KAFH,CAES,UAACC,GAAD;AAAA,eAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAT;AAAA,OAFT;AAGAC,MAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,QAAAA,GAAG,EAAE,CAAN;AAASC,QAAAA,IAAI,EAAE,CAAf;AAAkBC,QAAAA,QAAQ,EAAE;AAA5B,OAAd;;AACA,YAAK3C,mBAAL,CAAyBC,iBAAzB;AACD,KAtIkB;;AAAA,UAwInB2C,YAxImB,GAwIJ,YAAM;AACnB,UAAM9C,OAAO,GAAG,MAAKF,KAAL,CAAWE,OAA3B;AACA,UAAMQ,GAAG,GAAG,MAAKV,KAAL,CAAWU,GAAvB;AACA,UAAMS,OAAO,GAAG,MAAKlC,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyBC,GAAzC;AACA,UAAMsC,OAAO,GAAG,MAAK5C,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCC,GAApD;AACA,UAAMC,QAAQ,GAAG,MAAKhD,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyB2C,QAA1C;AACA,UAAMhB,QAAQ,GAAG,IAAjB;AACA,UAAMiB,YAAY,GAAG,UAArB;AAEA,UAAMe,cAAc,GAAG;AAACvC,QAAAA,GAAG,EAAEA,GAAN;AACCR,QAAAA,OAAO,EAAEA,OADV;AAECiB,QAAAA,OAAO,EAAEA,OAFV;AAGCD,QAAAA,MAAM,EAAEe,QAHT;AAICjB,QAAAA,YAAY,EAAEkB,YAJf;AAKCjB,QAAAA,QAAQ,EAAEA;AALX,OAAvB;AAOA,UAAMmB,IAAI,GAAG;AAAC1B,QAAAA,GAAG,EAAEA,GAAN;AACCR,QAAAA,OAAO,EAAEA,OADV;AAEC2B,QAAAA,OAAO,EAAEA,OAFV;AAGCV,QAAAA,OAAO,EAAEA,OAHV;AAICc,QAAAA,QAAQ,EAAEA;AAJX,OAAb;AAMA3D,MAAAA,KAAK,CAAC4E,GAAN,CAAU,sBAAV,EAAkCd,IAAlC,EACGC,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OADX,EAEGG,KAFH,CAES,UAACC,GAAD;AAAA,eAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAT;AAAA,OAFT;;AAGA,YAAKpC,mBAAL,CAAyB2C,cAAzB;AACD,KAlKkB;;AAAA,UAoKnBE,YApKmB,GAoKJ,YAAM;AACnB,UAAMzC,GAAG,GAAG,MAAKV,KAAL,CAAWU,GAAvB;AACApC,MAAAA,KAAK,CAAC8E,MAAN,CAAa,qBAAb,EAAoC;AAAChB,QAAAA,IAAI,EAAE;AAAC1B,UAAAA,GAAG,EAAEA;AAAN;AAAP,OAApC,EACG2B,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OADX,EAEGG,KAFH,CAES,UAACC,GAAD;AAAA,eAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAT;AAAA,OAFT;;AAGA,YAAK9B,mBAAL,CAAyBF,GAAzB;AACD,KA1KkB;;AAAA,UA4KnB2C,WA5KmB,GA4KL,YAAM;AAChB,UAAMlC,OAAO,GAAG,MAAKlC,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyBC,GAAzC;AACA,UAAMsC,OAAO,GAAG,MAAK5C,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCC,GAApD;AAEA,UAAMI,IAAI,GAAG;AAAE7C,QAAAA,GAAG,EAAE4B,OAAP;AAAgBU,QAAAA,OAAO,EAAEA;AAAzB,OAAb;AACAvD,MAAAA,KAAK,CAAC4E,GAAN,CAAU,gBAAV,EAA4Bd,IAA5B,EACGC,IADH,CACS,CAAC,MAAKrC,KAAL,CAAWsD,aAAX,CAAyBC,QAAzB,CAAkCpC,OAAlC,CAAD,IAA+C,MAAKnB,KAAL,CAAWwD,SAA1D,GAAsE,MAAKpE,QAAL,CAAc;AAACqE,QAAAA,KAAK,EAAE,MAAKzD,KAAL,CAAWyD,KAAX,GAAmB;AAA3B,OAAd,CAAtE,GAAqH,IAD9H,EAEGpB,IAFH,CAEQ,MAAKjD,QAAL,CAAc;AAACoE,QAAAA,SAAS,EAAE;AAAZ,OAAd,CAFR,EAGGf,KAHH,CAGS,UAAAC,GAAG;AAAA,eAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAJ;AAAA,OAHZ;AAID,KArLgB;;AAGjB,UAAK1C,KAAL,GAAa;AACXqB,MAAAA,IAAI,EAAE,KADK;AAEXnB,MAAAA,OAAO,EAAE,EAFE;AAGXQ,MAAAA,GAAG,EAAE,EAHM;AAIXhB,MAAAA,OAAO,EAAE,CAJE;AAKXmB,MAAAA,iBAAiB,EAAE,CALR;AAMXhB,MAAAA,YAAY,EAAE,EANH;AAOXM,MAAAA,eAAe,EAAG,EAPP;AAQXd,MAAAA,WAAW,EAAE,IARF;AASXoE,MAAAA,KAAK,EAAE,MAAKxE,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoC0B,KAThC;AAUXH,MAAAA,aAAa,EAAE,MAAKrE,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoC2B,YAVxC;AAWXF,MAAAA,SAAS,EAAE;AAXA,KAAb;AAHiB;AAgBlB;;;;wCAEmB;AAAA;;AAClBlF,MAAAA,KAAK,CAACqF,GAAN,CAAU,0BAAV,EAAsC;AAACC,QAAAA,MAAM,EAC3B;AAAC/B,UAAAA,OAAO,EAAE,KAAK5C,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCC;AAA9C;AADoB,OAAtC,EAEGK,IAFH,CAEQ,UAAAC,GAAG;AAAA,eAAI,MAAI,CAACrD,KAAL,CAAW4E,YAAX,CAAwBvB,GAAG,CAACF,IAA5B,CAAJ;AAAA,OAFX,EAGGC,IAHH,CAGQ;AAAA,eAAM,MAAI,CAAC1C,qBAAL,CAA2B,MAAI,CAACV,KAAL,CAAWW,QAAtC,CAAN;AAAA,OAHR,EAIG6C,KAJH,CAIS,UAACC,GAAD;AAAA,eAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAT;AAAA,OAJT;AAKA,WAAKxD,YAAL;AACA,WAAKM,gBAAL;AACD;;;6BA8JQ;AAAA;;AACP,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKP,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoC+B,KAAzC,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAK7E,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCgC,IAAxC,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAK9E,KAAL,CAAW6C,QAAX,CAAoB9B,KAApB,CAA0B+B,IAA1B,CAA+BA,IAA/B,CAAoCb,MAAxC,CAJJ,eAKI;AAAG,QAAA,KAAK,EAAE;AAAC8C,UAAAA,MAAM,EAAE;AAAT,SAAV;AAA+B,QAAA,OAAO,EAAE,KAAK/E,KAAL,CAAWE,eAAX,GAA6B;AAAA,iBAAM,MAAI,CAACkE,WAAL,EAAN;AAAA,SAA7B,GAAwD;AAAA,iBAAM9E,OAAO,CAAC0F,OAAR,CAAgB,SAAhB,CAAN;AAAA,SAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAO,QAAA,SAAS,EAAC,2BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA+C,KAAKjE,KAAL,CAAWyD,KAA1D,MAFJ,CALJ,CADF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEG,KAAKxE,KAAL,CAAWW,QAAX,GACG,KAAKI,KAAL,CAAWG,eAAX,CAA2BF,GAA3B,CAA+B,UAACC,OAAD;AAAA,4BAC9B,oBAAC,MAAD,CAAM,cAAN;AACG,UAAA,OAAO,EAAEA,OADZ;AAEG,UAAA,GAAG,EAAEA,OAAO,CAACQ,GAFhB;AAGG,UAAA,WAAW,EAAE,MAAI,CAACzB,KAAL,CAAWK,UAAX,CAAsB,CAAtB,EAAyBC,GAHzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAD8B;AAAA,OAA/B,CADH,GAOO,IATV,CAXF,eAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,QAAQ,EAAE,KAAKoC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,SADL;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,MAAM,EAAC,QAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,EAOG,KAAK1C,KAAL,CAAWE,eAAX,gBACG,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,KAAK,EAAC,SAAlC;AAA4C,QAAA,IAAI,EAAC,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,gBAEG,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACG,oBAAC,MAAD;AAAS,QAAA,OAAO,EAAC,WAAjB;AAA6B,QAAA,KAAK,EAAC,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADH,CATN,CADF,CAvBF,eAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAKa,KAAL,CAAWqB,IADnB;AAEE,QAAA,OAAO,EAAE,KAAKC,WAFhB;AAGE,2BAAgB,oBAHlB;AAIE,4BAAiB,0BAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAME,oBAAC,WAAD;AAAa,QAAA,EAAE,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,eAOI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,iBAAD;AACE,QAAA,EAAE,EAAC,0BADL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWE,OAArC;AAA8C,QAAA,QAAQ,EAAE,KAAKqB,mBAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CADF,eAMI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,mBAAM;AAAC,UAAA,MAAI,CAACyB,YAAL;;AAAqB,UAAA,MAAI,CAAC1B,WAAL;AAAmB,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACA,WAAL,EAAN;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,eAOE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,mBAAM;AAAC,UAAA,MAAI,CAAC6B,YAAL;;AAAqB,UAAA,MAAI,CAAC7B,WAAL;AAAmB,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,CANJ,CAPJ,CADF,CAzCF,CADJ;AAuEE;;;;EAjQiBnD,S;;AAoQvB,SAAS+F,eAAT,CAAyBlE,KAAzB,EAAgC;AAC9B,SAAO;AACLJ,IAAAA,QAAQ,EAAEI,KAAK,CAACmE,aAAN,CAAoBvE,QADzB;AAELN,IAAAA,UAAU,EAAEU,KAAK,CAACoE,YAAN,CAAmB9E,UAF1B;AAGLH,IAAAA,eAAe,EAAEa,KAAK,CAACoE,YAAN,CAAmBC;AAH/B,GAAP;AAKD;;AAED,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AACpC,SAAO;AACLV,IAAAA,YAAY,EAAE,sBAACjE,QAAD;AAAA,aAAc2E,QAAQ,CAAClG,OAAO,CAACmG,mBAAR,CAA4B5E,QAA5B,CAAD,CAAtB;AAAA;AADT,GAAP;AAGD;;AAGD,eAAexB,OAAO,CAAC8F,eAAD,EAAkBI,kBAAlB,CAAP,CAA6CtF,QAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as ACTIONS from '../store/actions/actions';\r\nimport axios from 'axios';\r\nimport history from '../utils/history';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\n\r\n\r\nclass ShowPost extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      open: false,\r\n      comment: '',\r\n      cid: '',\r\n      opacity: 0,\r\n      delete_comment_id: 0,\r\n      comments_arr: [],\r\n      comments_motion : [],\r\n      cur_user_id: null,\r\n      likes: this.props.location.state.post.post.likes,\r\n      like_user_ids: this.props.location.state.post.post.like_user_id,\r\n      like_post: true,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get('/api/get/allpostcomments', {params:\r\n                      {post_id: this.props.location.state.post.post.pid}} )\r\n      .then(res => this.props.set_comments(res.data))\r\n      .then(() => this.add_comments_to_state(this.props.comments))\r\n      .catch((err) => console.log(err));\r\n    this.setCurUserID();\r\n    this.handleTransition();\r\n  }\r\n\r\n  setCurUserID = () => {\r\n    if(this.props.isAuthenticated) {\r\n      this.setState({cur_user_id: this.props.db_profile[0].uid})\r\n    }\r\n  }\r\n\r\n  handleTransition = () => (\r\n    setTimeout(() => this.setState({opacity: 1}), 400 )\r\n  );\r\n\r\n  add_comments_to_state = (comments) => {\r\n    this.setState({ comments_arr: [...comments]})\r\n    this.animate_comments();\r\n  }\r\n\r\n  animate_comments = () => {\r\n    let i = 1\r\n    this.state.comments_arr.map(comment => {  // eslint-disable-line\r\n      setTimeout(() => { this.setState({comments_motion: [...this.state.comments_motion, comment]}) }, 400 * i );\r\n      i++;\r\n    })\r\n  }\r\n\r\n  handleCommentSubmit = (submitted_comment) => {\r\n    setTimeout(() =>\r\n      this.setState({comments_motion: [submitted_comment, ...this.state.comments_motion]}),\r\n      50\r\n   )};\r\n\r\n   handleCommentUpdate = (comment) => {\r\n     const commentIndex = this.state.comments_motion.findIndex(com => com.cid === comment.cid)\r\n     let newArr = [...this.state.comments_motion]\r\n     newArr[commentIndex] = comment\r\n     this.setState({comments_motion: newArr })\r\n   };\r\n\r\n   handleCommentDelete = (cid) => {\r\n     this.setState({delete_comment_id: cid})\r\n     const newArr = this.state.comments_motion.filter(com => com.cid !== cid)\r\n     setTimeout(() => this.setState({comments_motion: newArr}), 900)\r\n   };\r\n\r\n  RenderComments = (comment) => (\r\n    <div className={this.state.delete_comment_id === comment.comment.cid\r\n                      ? \"FadeOutComment\"\r\n                      : \"CommentStyles\"}>\r\n      <h3> {comment.comment.comment} </h3>\r\n      <small>\r\n        { comment.comment.date_created === 'Just Now'\r\n          ?  <div> {comment.comment.isEdited\r\n                ? <span> Edited </span>\r\n                : <span> Just Now </span> }</div>\r\n          :  comment.comment.date_created\r\n        }\r\n      </small>\r\n      <p> By: { comment.comment.author} </p>\r\n      {comment.cur_user_id === comment.comment.user_id\r\n        ? <Button onClick={() => this.handleClickOpen(comment.comment.cid, comment.comment.comment)}>\r\n            Edit\r\n          </Button>\r\n        : null\r\n      }\r\n    </div>\r\n  );\r\n\r\n\r\n\r\n  handleClickOpen = (cid, comment) => (\r\n    this.setState({ open: true, comment: comment, cid: cid})\r\n  );\r\n\r\n  handleClose = () => (\r\n    this.setState({open: false, comment: '', cid: '' })\r\n  );\r\n\r\n  handleCommentChange = (event) => (\r\n    this.setState({comment: event.target.value})\r\n  );\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    this.setState({comment: ''})\r\n\r\n    const comment = event.target.comment.value\r\n    const user_id = this.props.db_profile[0].uid\r\n    const post_id = this.props.location.state.post.post.pid\r\n    const username = this.props.db_profile[0].username\r\n    const current_time = \"Just Now\"\r\n    const temp_cid = 63426\r\n\r\n    const submitted_comment = {cid: temp_cid,\r\n                               comment: comment,\r\n                               user_id: user_id,\r\n                               author: username,\r\n                               date_created: current_time }\r\n\r\n    const data = {comment: comment,\r\n                  post_id: post_id,\r\n                  user_id: user_id,\r\n                  username: username }\r\n\r\n    axios.post('/api/post/commenttodb', data)\r\n      .then(res => console.log(res))\r\n      .catch((err) => console.log(err))\r\n    window.scroll({top: 0, left: 0, behavior: 'smooth'})\r\n    this.handleCommentSubmit(submitted_comment)\r\n  }\r\n\r\n  handleUpdate = () => {\r\n    const comment = this.state.comment\r\n    const cid = this.state.cid\r\n    const user_id = this.props.db_profile[0].uid\r\n    const post_id = this.props.location.state.post.post.pid\r\n    const username = this.props.db_profile[0].username\r\n    const isEdited = true\r\n    const current_time = \"Just Now\"\r\n\r\n    const edited_comment = {cid: cid,\r\n                            comment: comment,\r\n                            user_id: user_id,\r\n                            author: username,\r\n                            date_created: current_time,\r\n                            isEdited: isEdited }\r\n\r\n    const data = {cid: cid,\r\n                  comment: comment,\r\n                  post_id: post_id,\r\n                  user_id: user_id,\r\n                  username: username }\r\n\r\n    axios.put('/api/put/commenttodb', data)\r\n      .then(res => console.log(res))\r\n      .catch((err) => console.log(err))\r\n    this.handleCommentUpdate(edited_comment);\r\n  }\r\n\r\n  handleDelete = () => {\r\n    const cid = this.state.cid\r\n    axios.delete('/api/delete/comment', {data: {cid: cid}} )\r\n      .then(res => console.log(res))\r\n      .catch((err) => console.log(err))\r\n    this.handleCommentDelete(cid)\r\n  }\r\n\r\n  handleLikes = () => {\r\n      const user_id = this.props.db_profile[0].uid\r\n      const post_id = this.props.location.state.post.post.pid\r\n\r\n      const data = { uid: user_id, post_id: post_id }\r\n      axios.put('/api/put/likes', data)\r\n        .then( !this.state.like_user_ids.includes(user_id) && this.state.like_post ? this.setState({likes: this.state.likes + 1}) : null)\r\n        .then(this.setState({like_post: false}))\r\n        .catch(err => console.log(err))\r\n    };\r\n\r\n\r\n  render() {\r\n    return(\r\n        <div>\r\n          <div>\r\n            <h2>Post</h2>\r\n              <h4>{this.props.location.state.post.post.title}</h4>\r\n              <p>{this.props.location.state.post.post.body}</p>\r\n              <p>{this.props.location.state.post.post.author}</p>\r\n              <a style={{cursor: 'pointer'}} onClick={this.props.isAuthenticated ? () => this.handleLikes() : () => history.replace('/signup')}>\r\n                  <i className=\"material-icons\">thumb_up</i>\r\n                  <small className=\"notification-num-showpost\"> {this.state.likes} </small>\r\n                </a>\r\n          </div>\r\n          <div>\r\n            <h2> Comments:</h2>\r\n            {this.props.comments\r\n              ? this.state.comments_motion.map((comment) =>\r\n                 <this.RenderComments\r\n                    comment={comment}\r\n                    key={comment.cid}\r\n                    cur_user_id={this.props.db_profile[0].uid}\r\n                   />)\r\n                  : null\r\n            }\r\n          </div>\r\n          <div>\r\n            <form onSubmit={this.handleSubmit}>\r\n              <TextField\r\n                id=\"comment\"\r\n                label=\"Comment\"\r\n                margin=\"normal\"\r\n              />\r\n              <br />\r\n              {this.props.isAuthenticated\r\n                ? <Button variant=\"contained\" color=\"primary\" type=\"submit\" >Submit</Button>\r\n                : <Link to=\"/signup\">\r\n                     <Button  variant=\"contained\" color=\"primary\">\r\n                         Signup to Comment\r\n                      </Button>\r\n                   </Link>\r\n               }\r\n            </form>\r\n          </div>\r\n          <div>\r\n            <Dialog\r\n              open={this.state.open}\r\n              onClose={this.handleClose}\r\n              aria-labelledby=\"alert-dialog-title\"\r\n              aria-describedby=\"alert-dialog-description\"\r\n            >\r\n              <DialogTitle id=\"alert-dialog-title\">Edit Comment</DialogTitle>\r\n                <DialogContent>\r\n                  <DialogContentText\r\n                    id=\"alert-dialog-description\"\r\n                    >\r\n                    <input type=\"text\" value={this.state.comment} onChange={this.handleCommentChange}/>\r\n                    </DialogContentText>\r\n                    <DialogActions>\r\n                      <Button onClick={() => {this.handleUpdate(); this.handleClose()} }>\r\n                         Agree\r\n                      </Button>\r\n                      <Button onClick={() => this.handleClose()}>\r\n                       Cancel\r\n                      </Button>\r\n                      <Button onClick={() => {this.handleDelete(); this.handleClose()} }>\r\n                        Delete\r\n                      </Button>\r\n                  </DialogActions>\r\n                </DialogContent>\r\n            </Dialog>\r\n          </div>\r\n        </div>\r\n    )}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    comments: state.posts_reducer.comments,\r\n    db_profile: state.auth_reducer.db_profile,\r\n    isAuthenticated: state.auth_reducer.is_authenticated\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    set_comments: (comments) => dispatch(ACTIONS.fetch_post_comments(comments))\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPost)\r\n"]},"metadata":{},"sourceType":"module"}